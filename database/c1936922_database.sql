-- MySQL Script generated by MySQL Workbench
-- Tue Apr 21 15:53:55 2020
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION';

-- -----------------------------------------------------
-- Schema snakesAndLaddersData
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema snakesAndLaddersData
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `snakesAndLaddersData` DEFAULT CHARACTER SET utf8 ;
USE `snakesAndLaddersData` ;

-- -----------------------------------------------------
-- Table `snakesAndLaddersData`.`Dice`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `snakesAndLaddersData`.`Dice` ;

CREATE TABLE IF NOT EXISTS `snakesAndLaddersData`.`Dice` (
  `DiceID` INT NOT NULL,
  `DiceCount` INT NOT NULL,
  `DiceFaces` INT NOT NULL,
  PRIMARY KEY (`DiceID`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `snakesAndLaddersData`.`Game`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `snakesAndLaddersData`.`Game` ;

CREATE TABLE IF NOT EXISTS `snakesAndLaddersData`.`Game` (
  `gameID` INT NOT NULL,
  `GameTurn` INT NOT NULL,
  `boardSize` INT NOT NULL,
  `winningSquare` INT NULL,
  `gameHasEnded` TINYINT NULL,
  `boostSquareFeature` TINYINT NULL,
  `winningSquareFeature` TINYINT NULL,
  `Dice_DiceID` INT NOT NULL,
  PRIMARY KEY (`gameID`, `GameTurn`),
  INDEX `fk_Game_Dice1_idx` (`Dice_DiceID` ASC) VISIBLE,
  CONSTRAINT `fk_Game_Dice1`
    FOREIGN KEY (`Dice_DiceID`)
    REFERENCES `snakesAndLaddersData`.`Dice` (`DiceID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `snakesAndLaddersData`.`Players`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `snakesAndLaddersData`.`Players` ;

CREATE TABLE IF NOT EXISTS `snakesAndLaddersData`.`Players` (
  `playerID` INT NOT NULL,
  `playerName` VARCHAR(45) NULL,
  `playerColour` VARCHAR(45) NOT NULL,
  `playerPosition` INT ZEROFILL NULL,
  `playerMovesTaken` INT NOT NULL,
  `playerWonGame` TINYINT NOT NULL,
  `Game_gameID` INT NOT NULL,
  PRIMARY KEY (`playerID`),
  INDEX `fk_Players_Game1_idx` (`Game_gameID` ASC) VISIBLE,
  CONSTRAINT `fk_Players_Game1`
    FOREIGN KEY (`Game_gameID`)
    REFERENCES `snakesAndLaddersData`.`Game` (`gameID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `snakesAndLaddersData`.`Snakes`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `snakesAndLaddersData`.`Snakes` ;

CREATE TABLE IF NOT EXISTS `snakesAndLaddersData`.`Snakes` (
  `snakeID` INT NOT NULL,
  `snakeHead` INT NOT NULL,
  `snakeTail` INT NOT NULL,
  `Game_gameID` INT NOT NULL,
  PRIMARY KEY (`snakeID`),
  INDEX `fk_Snakes_Game1_idx` (`Game_gameID` ASC) VISIBLE,
  CONSTRAINT `fk_Snakes_Game1`
    FOREIGN KEY (`Game_gameID`)
    REFERENCES `snakesAndLaddersData`.`Game` (`gameID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `snakesAndLaddersData`.`Ladders`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `snakesAndLaddersData`.`Ladders` ;

CREATE TABLE IF NOT EXISTS `snakesAndLaddersData`.`Ladders` (
  `ladderID` INT NOT NULL,
  `ladderFoot` INT NOT NULL,
  `ladderTop` INT NOT NULL,
  `Game_gameID` INT NOT NULL,
  PRIMARY KEY (`ladderID`),
  INDEX `fk_Ladders_Game1_idx` (`Game_gameID` ASC) VISIBLE,
  CONSTRAINT `fk_Ladders_Game1`
    FOREIGN KEY (`Game_gameID`)
    REFERENCES `snakesAndLaddersData`.`Game` (`gameID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `snakesAndLaddersData`.`Boosts`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `snakesAndLaddersData`.`Boosts` ;

CREATE TABLE IF NOT EXISTS `snakesAndLaddersData`.`Boosts` (
  `boostID` INT NOT NULL,
  `boostLocation` INT NOT NULL,
  `Game_gameID` INT NOT NULL,
  PRIMARY KEY (`boostID`),
  INDEX `fk_Boosts_Game1_idx` (`Game_gameID` ASC) VISIBLE,
  CONSTRAINT `fk_Boosts_Game1`
    FOREIGN KEY (`Game_gameID`)
    REFERENCES `snakesAndLaddersData`.`Game` (`gameID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `snakesAndLaddersData`.`Moves`
-- -----------------------------------------------------
DROP TABLE IF EXISTS `snakesAndLaddersData`.`Moves` ;

CREATE TABLE IF NOT EXISTS `snakesAndLaddersData`.`Moves` (
  `moveID` INT NOT NULL,
  `moveStart` INT NOT NULL,
  `moveEnd` INT NOT NULL,
  `moveRoll` INT NOT NULL DEFAULT 'moveEnd-moveStart',
  `Players_playerID` INT NOT NULL,
  `Game_gameID` INT NOT NULL,
  PRIMARY KEY (`moveID`),
  UNIQUE INDEX `moveStart_UNIQUE` (`moveStart` ASC) VISIBLE,
  UNIQUE INDEX `moveEnd_UNIQUE` (`moveEnd` ASC) VISIBLE,
  INDEX `fk_Moves_Players1_idx` (`Players_playerID` ASC) VISIBLE,
  INDEX `fk_Moves_Game1_idx` (`Game_gameID` ASC) VISIBLE,
  CONSTRAINT `fk_Moves_Players1`
    FOREIGN KEY (`Players_playerID`)
    REFERENCES `snakesAndLaddersData`.`Players` (`playerID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_Moves_Game1`
    FOREIGN KEY (`Game_gameID`)
    REFERENCES `snakesAndLaddersData`.`Game` (`gameID`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
